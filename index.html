<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø±Ø­Ù„Ø© Ø§Ù„Ø§Ø¯Ø®Ø§Ø± Ù„ØªØ­Ù‚ÙŠÙ‚ Ø­Ù„Ù…Ù†Ø§</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Tajawal:wght@300;400;500;700&display=swap');
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Tajawal', sans-serif;
            background: linear-gradient(135deg, #ffeef8 0%, #e8f4fd 100%);
            min-height: 100vh;
            padding: 20px;
            direction: rtl;
        }
        
        .container {
            max-width: 400px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.9);
            border-radius: 25px;
            padding: 30px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(10px);
        }
        
        .header {
            text-align: center;
            margin-bottom: 30px;
        }
        
        .title {
            font-size: 24px;
            font-weight: 700;
            color: #6b73ff;
            margin-bottom: 8px;
        }
        
        .subtitle {
            font-size: 14px;
            color: #8b5cf6;
            opacity: 0.8;
        }
        
        .percentage-display {
            text-align: center;
            margin-bottom: 30px;
        }
        
        .percentage {
            font-size: 48px;
            font-weight: 700;
            color: #6b73ff;
            text-shadow: 0 2px 10px rgba(107, 115, 255, 0.3);
            transition: all 0.5s ease;
        }
        
        .bulb-container {
            display: flex;
            justify-content: center;
            margin-bottom: 30px;
        }
        
        .bulb {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background: #ff9999;
            border: 4px solid #fff;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        
        .bulb.yellow {
            background: linear-gradient(135deg, #ffd93d, #ffb347);
            box-shadow: 0 10px 30px rgba(255, 217, 61, 0.4);
        }
        
        .bulb.green {
            background: linear-gradient(135deg, #4ade80, #22c55e);
            box-shadow: 0 10px 30px rgba(74, 222, 128, 0.4);
        }
        
        .bulb::before {
            content: '';
            position: absolute;
            top: 20%;
            left: 20%;
            width: 60%;
            height: 60%;
            background: rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            transform: rotate(-45deg);
        }
        
        .progress-container {
            margin-bottom: 30px;
        }
        
        .progress-bar {
            width: 100%;
            height: 20px;
            background: #e5e7eb;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: inset 0 2px 5px rgba(0, 0, 0, 0.1);
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #6b73ff, #9333ea);
            border-radius: 15px;
            transition: width 0.8s ease;
            position: relative;
        }
        
        .progress-fill::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
            animation: shimmer 2s infinite;
        }
        
        @keyframes shimmer {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }
        
        .amounts-display {
            text-align: center;
            margin-bottom: 30px;
            font-size: 18px;
            font-weight: 500;
            color: #4b5563;
        }
        
        .input-group {
            margin-bottom: 20px;
        }
        
        .label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: #374151;
        }
        
        .input {
            width: 100%;
            padding: 15px;
            border: 2px solid #e5e7eb;
            border-radius: 15px;
            font-size: 16px;
            font-family: 'Tajawal', sans-serif;
            transition: all 0.3s ease;
            background: rgba(255, 255, 255, 0.8);
        }
        
        .input:focus {
            outline: none;
            border-color: #6b73ff;
            box-shadow: 0 0 0 3px rgba(107, 115, 255, 0.1);
        }
        
        .button {
            width: 100%;
            padding: 15px;
            background: linear-gradient(135deg, #6b73ff, #9333ea);
            color: white;
            border: none;
            border-radius: 15px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: 'Tajawal', sans-serif;
            margin-bottom: 20px;
        }
        
        .button:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(107, 115, 255, 0.3);
        }
        
        .custom-message-group {
            margin-top: 20px;
            padding: 20px;
            background: rgba(255, 255, 255, 0.5);
            border-radius: 15px;
            border: 2px dashed #d1d5db;
        }
        
        .message-popup {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0);
            background: white;
            padding: 30px;
            border-radius: 20px;
            box-shadow: 0 25px 50px rgba(0, 0, 0, 0.2);
            z-index: 1000;
            text-align: center;
            max-width: 300px;
            width: 90%;
            transition: all 0.3s ease;
        }
        
        .message-popup.show {
            transform: translate(-50%, -50%) scale(1);
        }
        
        .message-popup .emoji {
            font-size: 40px;
            margin-bottom: 15px;
        }
        
        .message-popup .text {
            font-size: 18px;
            font-weight: 500;
            color: #374151;
            margin-bottom: 20px;
        }
        
        .close-btn {
            background: #6b73ff;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 10px;
            cursor: pointer;
            font-family: 'Tajawal', sans-serif;
        }
        
        .overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 999;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }
        
        .overlay.show {
            opacity: 1;
            visibility: visible;
        }
        
        .celebration {
            animation: celebrate 0.6s ease;
        }
        
        @keyframes celebrate {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }
        
        @media (max-width: 480px) {
            .container {
                margin: 10px;
                padding: 20px;
            }
            
            .percentage {
                font-size: 36px;
            }
            
            .title {
                font-size: 20px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1 class="title">Ø±Ø­Ù„Ø© Ø§Ù„Ø§Ø¯Ø®Ø§Ø± Ù„ØªØ­Ù‚ÙŠÙ‚ Ø­Ù„Ù…Ù†Ø§</h1>
            <p class="subtitle">ÙƒÙ„ Ø®Ø·ÙˆØ© ØªÙ‚Ø±Ù‘Ø¨Ù†Ø§ Ù…Ù† Ø¨Ø¹Ø¶</p>
        </div>
        
        <div class="percentage-display">
            <div class="percentage" id="percentage">0%</div>
        </div>
        
        <div class="bulb-container">
            <div class="bulb" id="bulb"></div>
        </div>
        
        <div class="progress-container">
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill" style="width: 0%"></div>
            </div>
        </div>
        
        <div class="amounts-display" id="amountsDisplay">
            0$ / 0$
        </div>
        
        <div class="input-group">
            <label class="label" for="targetAmount">Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ù‡Ø¯Ù ($)</label>
            <input type="number" class="input" id="targetAmount" placeholder="Ù…Ø«Ø§Ù„: 3500" min="0">
        </div>
        
        <div class="input-group">
            <label class="label" for="currentAmount">Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ø­Ø§Ù„ÙŠ ($)</label>
            <input type="number" class="input" id="currentAmount" placeholder="Ù…Ø«Ø§Ù„: 1200" min="0">
        </div>
        
        <button class="button" onclick="updateProgress()">ØªØ­Ø¯ÙŠØ« Ø§Ù„ØªÙ‚Ø¯Ù…</button>
        
        <div class="custom-message-group">
            <label class="label" for="customMessage">Ø±Ø³Ø§Ù„Ø© Ù…Ø®ØµØµØ© Ø¹Ù†Ø¯ Ø§Ù„ÙˆØµÙˆÙ„ Ù„Ù€ 100%</label>
            <input type="text" class="input" id="customMessage" placeholder="Ø§ÙƒØªØ¨ Ø±Ø³Ø§Ù„ØªÙƒ Ø§Ù„Ø®Ø§ØµØ© Ù‡Ù†Ø§...">
        </div>
    </div>
    
    <div class="overlay" id="overlay"></div>
    <div class="message-popup" id="messagePopup">
        <div class="emoji" id="messageEmoji"></div>
        <div class="text" id="messageText"></div>
        <button class="close-btn" onclick="closeMessage()">Ø¥ØºÙ„Ø§Ù‚</button>
    </div>

    <script>
        // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø­ÙÙˆØ¸Ø©
        function loadData() {
            const targetAmount = localStorage.getItem('targetAmount') || '';
            const currentAmount = localStorage.getItem('currentAmount') || '';
            const customMessage = localStorage.getItem('customMessage') || '';
            const bulbState = localStorage.getItem('bulbState') || 'red';
            const shownMessages = JSON.parse(localStorage.getItem('shownMessages') || '{}');
            
            document.getElementById('targetAmount').value = targetAmount;
            document.getElementById('currentAmount').value = currentAmount;
            document.getElementById('customMessage').value = customMessage;
            
            // ØªØ­Ø¯ÙŠØ« Ø­Ø§Ù„Ø© Ø§Ù„Ù„Ù…Ø¨Ø©
            const bulb = document.getElementById('bulb');
            bulb.className = `bulb ${bulbState}`;
            
            // ØªØ­Ø¯ÙŠØ« Ø§Ù„ØªÙ‚Ø¯Ù…
            if (targetAmount && currentAmount) {
                updateProgressDisplay(parseFloat(currentAmount), parseFloat(targetAmount));
            }
            
            return shownMessages;
        }
        
        // Ø­ÙØ¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
        function saveData() {
            localStorage.setItem('targetAmount', document.getElementById('targetAmount').value);
            localStorage.setItem('currentAmount', document.getElementById('currentAmount').value);
            localStorage.setItem('customMessage', document.getElementById('customMessage').value);
            
            const bulb = document.getElementById('bulb');
            let bulbState = 'red';
            if (bulb.classList.contains('yellow')) bulbState = 'yellow';
            if (bulb.classList.contains('green')) bulbState = 'green';
            localStorage.setItem('bulbState', bulbState);
        }
        
        // ØªØ­Ø¯ÙŠØ« Ø¹Ø±Ø¶ Ø§Ù„ØªÙ‚Ø¯Ù…
        function updateProgressDisplay(current, target) {
            const percentage = target > 0 ? Math.min((current / target) * 100, 100) : 0;
            
            document.getElementById('percentage').textContent = Math.round(percentage) + '%';
            document.getElementById('progressFill').style.width = percentage + '%';
            document.getElementById('amountsDisplay').textContent = `${current}$ / ${target}$`;
            
            // ØªØ­Ø¯ÙŠØ« Ø­Ø§Ù„Ø© Ø§Ù„Ù„Ù…Ø¨Ø©
            const bulb = document.getElementById('bulb');
            if (percentage >= 100) {
                if (!bulb.classList.contains('yellow') && !bulb.classList.contains('green')) {
                    bulb.className = 'bulb yellow';
                }
            } else {
                bulb.className = 'bulb';
            }
            
            // Ø¥Ø¶Ø§ÙØ© ØªØ£Ø«ÙŠØ± Ø§Ù„Ø§Ø­ØªÙØ§Ù„
            if (percentage >= 100) {
                document.getElementById('percentage').classList.add('celebration');
                setTimeout(() => {
                    document.getElementById('percentage').classList.remove('celebration');
                }, 600);
            }
            
            return percentage;
        }
        
        // Ø¹Ø±Ø¶ Ø§Ù„Ø±Ø³Ø§Ø¦Ù„
        function showMessage(emoji, text) {
            document.getElementById('messageEmoji').textContent = emoji;
            document.getElementById('messageText').textContent = text;
            document.getElementById('overlay').classList.add('show');
            document.getElementById('messagePopup').classList.add('show');
        }
        
        // Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ø±Ø³Ø§Ù„Ø©
        function closeMessage() {
            document.getElementById('overlay').classList.remove('show');
            document.getElementById('messagePopup').classList.remove('show');
        }
        
        // ØªØ­Ø¯ÙŠØ« Ø§Ù„ØªÙ‚Ø¯Ù…
        function updateProgress() {
            const targetAmount = parseFloat(document.getElementById('targetAmount').value) || 0;
            const currentAmount = parseFloat(document.getElementById('currentAmount').value) || 0;
            const customMessage = document.getElementById('customMessage').value;
            
            if (targetAmount <= 0) {
                alert('ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ù…Ø¨Ù„Øº Ù‡Ø¯Ù ØµØ­ÙŠØ­');
                return;
            }
            
            if (currentAmount < 0) {
                alert('Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ø­Ø§Ù„ÙŠ Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø£Ù† ÙŠÙƒÙˆÙ† Ø³Ø§Ù„Ø¨Ø§Ù‹');
                return;
            }
            
            const percentage = updateProgressDisplay(currentAmount, targetAmount);
            
            // Ø­ÙØ¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
            saveData();
            
            // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø±Ø³Ø§Ø¦Ù„
            const shownMessages = JSON.parse(localStorage.getItem('shownMessages') || '{}');
            
            if (percentage >= 25 && percentage < 50 && !shownMessages['25']) {
                showMessage('ğŸ’™', 'Ø¨Ø¯Ø§ÙŠØ© Ø¬Ù…ÙŠÙ„Ø©â€¦ Ø§Ø³ØªÙ…Ø±');
                shownMessages['25'] = true;
            } else if (percentage >= 50 && percentage < 75 && !shownMessages['50']) {
                showMessage('âœ¨', 'Ù†ØµÙ Ø§Ù„Ø·Ø±ÙŠÙ‚! Ø£Ù†Øª ØªÙ‚ØªØ±Ø¨');
                shownMessages['50'] = true;
            } else if (percentage >= 75 && percentage < 100 && !shownMessages['75']) {
                showMessage('ğŸŒŸ', 'Ù‚Ø±ÙŠØ¨ Ø¬Ø¯Ù‹Ø§â€¦ Ø§Ù„Ø­Ù„Ù… ØµØ§Ø± ÙˆØ§Ø¶Ø­');
                shownMessages['75'] = true;
            } else if (percentage >= 100 && !shownMessages['100']) {
                const message = customMessage || 'Ø§Ù„Ø­Ù…Ø¯Ù„Ù„Ù‡â€¦ Ø£ØµØ¨Ø­Ù†Ø§ Ø¬Ø§Ù‡Ø²ÙŠÙ†';
                showMessage('ğŸ’›', message);
                shownMessages['100'] = true;
            }
            
            // Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ø±Ø³Ø§Ø¦Ù„ Ø¥Ø°Ø§ Ø§Ù†Ø®ÙØ¶Øª Ø§Ù„Ù†Ø³Ø¨Ø©
            if (percentage < 25) {
                delete shownMessages['25'];
                delete shownMessages['50'];
                delete shownMessages['75'];
                delete shownMessages['100'];
            } else if (percentage < 50) {
                delete shownMessages['50'];
                delete shownMessages['75'];
                delete shownMessages['100'];
            } else if (percentage < 75) {
                delete shownMessages['75'];
                delete shownMessages['100'];
            } else if (percentage < 100) {
                delete shownMessages['100'];
            }
            
            localStorage.setItem('shownMessages', JSON.stringify(shownMessages));
        }
        
        // Ø§Ù„ØªØ¹Ø§Ù…Ù„ Ù…Ø¹ Ø§Ù„Ù†Ù‚Ø± Ø¹Ù„Ù‰ Ø§Ù„Ù„Ù…Ø¨Ø©
        document.getElementById('bulb').addEventListener('click', function() {
            const bulb = this;
            const percentage = parseFloat(document.getElementById('percentage').textContent);
            
            if (percentage >= 100 && bulb.classList.contains('yellow')) {
                bulb.className = 'bulb green';
                showMessage('ğŸ‰', 'Ø¬Ø§Ù‡Ø² Ø£Ø¨Ø¯Ø£ Ø§Ù„Ø®Ø·ÙˆØ© Ø§Ù„Ø±Ø³Ù…ÙŠØ© Ø¨Ø¥Ø°Ù† Ø§Ù„Ù„Ù‡');
                saveData();
            }
        });
        
        // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¹Ù†Ø¯ Ø¨Ø¯Ø¡ Ø§Ù„ØªØ´ØºÙŠÙ„
        window.addEventListener('load', loadData);
        
        // Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ø±Ø³Ø§Ù„Ø© Ø¹Ù†Ø¯ Ø§Ù„Ù†Ù‚Ø± Ø¹Ù„Ù‰ Ø§Ù„Ø®Ù„ÙÙŠØ©
        document.getElementById('overlay').addEventListener('click', closeMessage);
    </script>
</body>
</html>
